\chapter{The Initial Idea and the Prototype}
\label{chp:4:InitIdeaProt}
In this chapter, a mass communication schema and possible exceptional cases will be introduced. Afterwards, the initial prototype will be reviewed and evaluated.

\section{Mass Email Communication Concept}
\label{sec:4.1:MassEmaiCommConc}

Whenever a researcher initiates a mass email communication, several unexpected outcomes cannot be predicted beforehand, and they can affect the flow of the communication. Respondents may come up with clarifications to an initial question, an email address considered current and active might not exist anymore, an auto responder might have been set since the respondent is not available at the moment are just some of the unexpected outcomes affecting the flow of the communication.

\subsection{A Mass Email Communication Scenario}
\label{subsec:4.1.1:Cust}

In section~\ref{sec:1:EmailDataCol}, an online learning platform scenario was used to illustrate the possible reasons explaining the need for an email data collection. Considering it once more, assuming that we are exploring our users in helping us improve our platform. Therefore, we started sending out emails to our registered users to obtain their permission for us to ask some questions. This initial email might be similar to listing~\ref{lst:EmaiInvtQest}.
\vspace{1cm}

\clearpage

\lstset {
 basicstyle=\footnotesize,
 frame=shadowbox,
 rulesepcolor=\color{black},
 showspaces=false,showtabs=false,tabsize=4,
 numberstyle=\tiny,
 captionpos=b,
 xleftmargin=0.7cm, xrightmargin=0.5cm,
 lineskip=-0.1em,
 abovecaptionskip=1\baselineskip
}

\begin{lstlisting}[language=, caption={[Email Invitation to Questionnaire for Online Learning Platform]Email Invitation to Questionnaire for Online Learning Platform}, label={lst:EmaiInvtQest}]
Dear John,

you have recently attended the "Cryptography" and the "Natural Language Processing" courses. Do you mind if you answer some questions regarding these courses?

The questionnaire will take only 15 minutes, and it will help us a lot on improving our platform.

Kind regards,
your online course team.
\end{lstlisting}

After the initial invitation email was sent to obtain their permission for the upcoming questionnaire, these are possible answers that we might get:

\begin{compactenum}
	\item Yes, I would like to be involved.
	\item No, I am quite busy.
	\item I could be involved, but I am busy until the end of this month.
	\item An automated message from the recipients, indicating that he or she is on vacation.
\end{compactenum}
\vspace{1cm}

Figure~\ref{fig:EmailDiagram} shows a simplified version of this scenario. The people who would accept our invitation will get a second email containing the questionnaire. As soon as they respond back with the answers to the questions, we will then send a "thank you" email for their participation. Those who opted not to accept the invitation will get a motivation email, encouraging them on joining next time. Next, we will classify the people who returned a conditional acceptance, under a "maybe" case. Again, there might be several reasons behind their conditional acceptance, such as they are willing to answer the questionnaire but they are busy that week. With this, we can email them back, wishing them luck if they are about to take an exam and sending them a reminder email for the questionnaire, depending on their availability. After the reminder email, we expect to get an email, confirming their participation for the questionnaire. Then, the email interaction will continue with the people who initially accepted invitation for our research. Cases of an invitation with an "auto-respond" reply is not clear, therefore the interaction will not go further, unless they send us a reply confirming otherwise in the near future. However, if the auto-respond email provides some information, we can set a reminder email for the date mentioned.
\vspace{1cm}

\begin{figure}[htbp]
	\centering
	\begin{pdfpic}
	    \input{imgs/EmailDiagram.tex}
	\end{pdfpic}
	\caption[An Email Campaign Scenario]{An Email Campaign Scenario}
	\label{fig:EmailDiagram}
\end{figure}

The above mentioned sample scenario can be handled manually with individual efforts for a small group of participants. These manual efforts will involve the following points:

\begin{compactitem}
	\item Figure out the courses for the participants to attended in our email list, and adds them to the email content for each person.
	\item Write a generic answer for those who accepted the invitation for the questionnaire, and write the questions.
	\item Write a generic motivation email to support those who did not accept the invitation.
	\item Go over the "maybe" cases, and record the date and other important information they mentioned involving their participation.
	\item Write a generic email to the "maybe" cases mention about the reminder that will be sent according to the time period they mentioned. This email may include a couple sentences encouraging them to give a feedback and share the reason why they are unable to accept the invitation for the questionnaire at the moment.
	\item Go over the "auto-respond" cases to figure out if they are related to a failed delivery, due to problematic email addresses, or if they are just automated vacation responder, so we can set a reminder email later on.
	\item Send a thank you email to everyone who answered the questionnaire.
\end{compactitem}
\vspace{1cm}

However, the larger the amount of participants there is, the harder it is to manually work on all of them, thus, the lesser personalization the emails will get. For example, the "maybe" cases might not get a personalized feedback, but instead just an email indication that they will be reminded on a later date. Moreover, this is just one of the possible cases. There are a lot more cases in real life situations, which might require the researchers to completely write a generic email by again ignoring the context personalizing the emails to be sent out according to each recipient, since manual efforts will not be enough to write custom emails for those cases. For extreme cases, we might even consider the need to terminate the communication forever, or results might give the side effect of a diffusion of responsibility theory as mentioned in section~\ref{sec:2.3:PersEmai}.
\vspace{1cm}

In figure~\ref{fig:ChartEffortCustom}, it is shown that the personalization of emails is directly proportional to the effort of composing those emails. The shaded part of the graph represents the situation, when the researchers used an application to create a mass email communication, while the area marked with a star represents the gold standard, which is really hard to reach with the available applications. 
\vspace{1cm}

\begin{figure}[htbp]
	\centering
	\begin{pdfpic}
	    \input{imgs/ChartEffortCustom.tex}
	\end{pdfpic}
	\caption[Effort vs Personalization on Composing Email]{Effort vs Personalization on Composing Email}
	\label{fig:ChartEffortCustom}
\end{figure}

In the next section, we will see how we can help researchers to reduce the efforts while increasing the personalization of emails.

\subsection{Possible Improvements to Reduce Efforts}
\label{subsec:4.1.2:ImprReduEffo}

After a mass email communication scenario was described in the previous section, we will see the possible improvements presented on this section to reduce the efforts on the researchers' side, while increasing the personalization of the content on some degree.

\paragraph{Contact Information}
The first step would be to import contacts and their relevant information. These will include some of the basic information we asked when they filled-up the registration form to our learning platform e.g. first and last name, email address and gender. Therefore, we can easily export these information into a different, easily-accessible file formats like Microsoft Excel or CSV\footnote{CSV stands for comma separated values, and is a plain-text file to store tabular data to often exchange data between disparate applications \citep{Repici2010}. } to make it ready for use to initiate our mass email conversation. The application that was discussed in section~\ref{sec:3.3:Resul} offers several options in importing data onto the mentioned systems. Therefore, the researchers do not need to manually enter those information to the system.

\paragraph{Dynamic Variables}
The email invitation included user specific data, like the name of the recipient at the salutation and the courses he or she attended. As it is hard to write information manually into all of the emails, we can apply dynamic variables insertion approach that is used by both email marketing applications (MailChimp and Constant Contact) and one of the \ac{CRM} application (SugarCRM), as analyzed in section~\ref{sec:3.3:Resul}. However, it is identified that SugarCRM has the limitation of allowing users to record only a limited amount of contact profile fields. Therefore, this can only help us apply the dynamic generation of the salutations in the emails, and not the course taken by the recipients. On the other hand, both Constant Contact and MailChimp support the feature of adding custom fields into a contact profile, and dynamically use them in the email's content. This can also help on removing the manual effort applied for the creation of the initial invitation email with the use of an email template with dynamic fields to be replaced by the application while sending them out. These dynamic fields can also add some degree of personalization into the emails.

\paragraph{Information Extraction}
As we begin getting answers from the respondents, we might need to extract some information from those emails. For example, this could be a date that we need to return an email to the recipients with a reminder as discussed on section~\ref{subsec:4.1.1:Cust}. Storing those information as we store contact information might allow us to easily access them again, and gives an opportunity to reuse them in the email content as a dynamic variable.

\paragraph{Reusability of Existing Emails}
After the initial invitation email, there will be many instances calling the need on reusing different versions of an email for further states of conversations. We mentioned the term "template" as an email with some dynamic variables in it. Later on, these variables will get their actual values, and it will be the actual message that we want to send. From here on, we will add another meaning to the term "template", to emphasize a message's reusability. Let us consider the "maybe" cases mentioned in section~\ref{subsec:4.1.1:Cust} to represent respondents who were too busy to participate on answering the questionnaire at that moment; but, maybe it is possible for them to participate on a later time (See figure~\ref{fig:EmailDiagram}). For instances like this, our recipients has to indicate a possible date for them to participate or provide an unclear answer about their availability. It is definite that we cannot ignore them if they provide us a date, and we should send them a reminder before that date to participate in the questionnaire in a generic email. This might give them a hint that the messages we send are actually automated, and it may result to some drawbacks that we discussed in chapter~\ref{chp:FouRelWor}. However, if we create two different email templates; one with a dynamic variable in it to mention when we will send a reminder, and the other one with a more generic content, including a time far enough to encourage them to participate in the questionnaire. Therefore, the next time we encounter a "maybe" case, we have two ready-to-use email templates to send them.

\paragraph{Visualization of Conversation State}
At this point, we have begun on creating different email templates for different conditions, to ease a researcher's life by allowing reusability on the replies. However, it is also difficult to pick out a template since a flow of a certain conversation is different from another one, one way or the other, and we have different email templates for different conditions. This will result to an additional effort in choosing the appropriate template. Besides, we might not need some of the templates after conversation's state gets further, and just use the latest ones more frequently compared to the the older ones. Therefore, we need an overview to show us what the current state of the conversation is, as well as to allow us to pick the proper template by leveraging this view.
\vspace{1cm}

Figure~\ref{fig:ConvStatView} represents a view in a directory tree structure for this purpose. All the possible email messages that we have written are collected in a hierarchical way, starting with the first invitation email at the root node. After the researcher began on obtaining messages from respondents, all of the possible answers we can write are at the second level of the tree, right after the invitation email node. Whenever we get an answer for the questionnaire, we would write an email to say thank you. This is also represented in the third level of the tree, right after the questionnaire node.
\vspace{1cm}

\begin{figure}[htbp]
	\dirtree{%
	.1 Invitation Email.
	.2 Questionnaire - Graduate Version (GV).
	.3 Thank You GV.
	.2 Questionnaire.
	.3 Thank You.
	.2 Questionnaire After Reminder.
	.2 Next Time.
	.2 Next Time with Motivation.
	.2 Reminder with Date.
	.2 Reminder Generic.
	.2 \vdots.
	}
	\caption[A Sample Conversation State and Template View]{A Sample Conversation State and Template View}
	\label{fig:ConvStatView}
\end{figure}

A view shown in figure~\ref{fig:ConvStatView} can also help the researchers pick out a template to reuse according to the email of the respondents. Therefore, they can easily see the previous answers they gave, and the level of the tree provides an idea on the overall state of the conversation. Considering existing applications in the market on section~\ref{sec:3.3:Resul}, none of them provides such conversation view and available templates had to be chosen from a mixed list, which includes messages belonging to other conversations as well.
\vspace{1cm}

Finally, after reviewing these initial information gathered to figure out how can we ease the efforts of the researchers while keeping the personalization in the emails high, the next section will discuss how this initial idea was applied into an application.


\section{The Prototype}
\label{sec:4.2:Prot}
A software prototype provides developers a better understanding of the requirements, what could be developed with the existing technology, and by allowing client interaction, it demonstrates to them what is functionally feasible, and revise with their imagination accordingly, which results in better inputs from them and more forward looking systems \citep{Bernstein1996}. In this section, we will analyze the requirements, and the actual prototype.

\subsection{Requirements Analysis}
\label{subsec:4.2.1:ProtReqiAnal}

In section~\ref{subsec:4.1.2:ImprReduEffo}, we initially considered some features on improving a researcher's personalized mass email communication. The following points will put those findings into a summary to describe them as requirements of the prototype:

\begin{compactenum}
	\item Contact information can come from different sources. Assuming we have at least the recipients' first names, last names, and email addresses, the application must store these information under a contact list permanently. 
	\item The application user can use variables in the email message for a recipient's first name and last name. Therefore, the application must allow a user to add different dynamic variables into an email's content to personalize the salutation of the emails.
	\item The application user can extract information from an email message into a \ac{KVP}\footnote{A key-value pair (KVP) represents two conntected data items, where a key is a unique identifier for some data items, and the value can be again a data item or a pointer to the location of data \citep{Rouse2008}. In this context, this thesis uses \ac{KVP} in the context of extracted information as values, and a unique key to represent its class. For example, "first name" can be a key, and each recipients first names will be a value for the "first name" key.} while reading responses. Therefore, the application must offer an option on obtaining \ac{KVP}s from users. At the end, each contact's record will have enough information saved in \ac{KVP} to describe all details we know about them.
	\item The application must allow users to use the extracted \ac{KVP}s as dynamic variables in the email content. This will allow us to personalize the email with the information specific to each recipient.
	\item The user can reuse a sent email as a template to reply to respondents or initiate a conversation for a group of people. Therefore, the application must offer an overview for picking out templates from a list.
	\item The application must show the whole flow of the conversation. Therefore, the template list can be showed in a directory tree structure as in figure~\ref{fig:ConvStatView}. Each node must represent the templates the user created, and let the user pick out a custom name for the given template.
	\item The application must offer a template selection and conversation flow representation under a specific single view. Therefore, the user should be allowed to pick which templates to reuse by looking at the nodes in the tree to figure out the current flow of the conversation.
\end{compactenum}

The next section will introduce the implemented prototype to satisfy the initial idea of a personalized mass email communication system and analyze how the aforementioned requirements are satisfied -- or not -- during the evaluation of the prototype.

\subsection{System}
\label{subsec:4.2.2:ProtSyst}

The initial system was built on top of an existing project named as EmailValet\footnote{https://www.gmailvalet.com/} also known as GmailValet in the \ac{HCI} group\footnote{https://hci.stanford.edu/} at the Stanford University. EmailValet is a \ac{SaaS} application that combines an email client with a task manager. Remote assistants from an expert crowdsourcing marketplace extract tasks from incoming emails, and annotate them in a task list separated from the inbox \citep{Kokkalis2013}.
\vspace{1cm}

Having a ready-to-use email client to implement the first version of the personalized mass email communication system helped us to save time and effort, and make us focus more on the initial requirements, as discussed in section~\ref{subsec:4.2.1:ProtReqiAnal}. From the technology point of view, we were also limited by EmailValet's existing architecture, which was developed in a Web framework \ac{RoR}\footnote{http://rubyonrails.org/}, a JavaScript framework jQuery\footnote{http://jquery.com/}, and a \ac{CSS} framework Twitter Bootstrap\footnote{http://getbootstrap.com/}.
\vspace{1cm}

EmailValet requires a Gmail account to register and sign in\footnote{EmailValet uses an open protocol named OAuth to provide credentials for authentication with Gmail. OAuth's community webpage is at http://oauth.net/} to the system, therefore the application's users have to grant access to EmailValet before using it. Figure \ref{fig:GmailValetInbox} shows EmailValet's inbox view after a user signed in and browse to a campaign\footnote{In this study, the word campaign is used as a shorhand for a mass email communication campaign, wherein a researcher initiates a conversation with groups of people related to one specific topic.}. On the left hand side, there is the email list pane, and a selected email can be read on the reading pane on the right.

\clearpage
 
\begin{figure}[H]
	\centering
	\includegraphics[width=1.00\textwidth]{imgs/GmailValetInbox.png}
	\caption[EmailValet Inbox View and Message Reading Pane]{EmailValet Inbox View and Message Reading Pane}
	\label{fig:GmailValetInbox}
\end{figure}

Starting a campaign is done exactly the same way as in composing an email. However, the corresponding view has two additional input fields to get the campaign's and the template's names from the user. A campaign name will help on identifying groups of conversations from other campaigns, or from regular email conversations in the inbox. A template name will help us identify which respondent's answers correspond to which emails that we sent. For example, in figure \ref{fig:GmailValetInbox}, a recipient's answer is the response to the questionnaire invitation that we sent earlier. A template name will also help us represent the template in a tree structure to pick from and reuse, and show the state of the conversation in the same tree structure.
\vspace{1cm}

The researchers can add their recipients list into the "Merge"\footnote{The word "merge" comes from the term "mail merge", which means a procedure to enable to combine a document with data files consisting a list of names. Therefore, the copies of the document will be different for each person it is sent to \citep{CollinsEnglishDictionary2013}.} input field as shown in figure \ref{fig:ComposePaneWithTemplates}, which corresponds to the "To" field in a regular email client. However, the format should be similar to the shown figure -- first name, last name, and email address written in angle brackets. Hence, those fields can be used dynamically in the salutation of the emails by writing one of the variables of \textit{\{\{first\_name\}\}} and \textit{\{\{last\_name\}\}}. Once the recipients list is entered, and the email is sent, these contacts will be recorded on Gmail's contacts book.
\vspace{1cm}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.70]{imgs/ComposePaneWithTemplates.png}
	\caption[Email Template Selection to Reuse Earlier Replies]{Email Template Selection to Reuse Earlier Replies}
	\label{fig:ComposePaneWithTemplates}
\end{figure}

Figure \ref{fig:ComposePaneWithTemplates} also shows the template tree used to represent the state of the conversation, and allow users to select a template from. The indentation at the nodes of the tree helps on identifying which templates are used after which one and therefore it gives an idea about the current state and flow of the conversation. According to this sample scenario in the figure, right after we sent the invitation email and started on getting responses, there were two possible answers to give the recipients. For those who rejected the invitation, we can select the "Rejected" node from the tree to reuse an answer we gave before. This can be a motivation email as discussed in section \ref{subsec:4.1.2:ImprReduEffo}. On the same note, the people who accepted the invitation would receive a \ac{NDA}, and afterwards the questionnaire as the conversation with them carries on. After sending the questionnaire, there were cases where some respondents sent an email clarifying some questions found in the questionnaire. According to figure \ref{fig:ComposePaneWithTemplates}, these cases are related to the questions number 3 and 18, and we explained those questions, to clear off the confusion or issues they are having. Again, since the system allow us to reuse our previous answers as a template; we do not need to rewrite our explanation for those questions not clear for future queries. On the other hand, if the researchers wish to create a new template, he or she can simply do so by adding the name of the template into the corresponding input field, and send the email. The next time the researcher fires up the application, he or she will find it in the template tree under the corresponding level of the node. Also, it is possible to select a template, made some modifications on it and save it as a new template. Therefore, a slightly different version of the templates can be reused during the communication as well.
\vspace{1cm}

Finally, there is an option to add \ac{KVP}s while reading the respondents' answers. In the reading pane, two input fields are present, allowing users to enter a key and its value corresponding to the extracted information from those emails while reading them. As shown on figure \ref{fig:EMailKVPs}, as a user adds a new \ac{KVP}, they can also see the existing ones added earlier to that email message.

\begin{figure}[htbp]
	\centering
	\includegraphics[scale=0.75]{imgs/EMailKVPs.png}
	\caption[Extracted Key-Value Pairs and Input Fields to Add New Ones]{Extracted Key-Value Pairs and Input Fields to Add New Ones}
	\label{fig:EMailKVPs}
\end{figure}

In the next section, we will address some implementation details about EmailValet's mass email communication modifications.

\subsection{Architecture}
\label{subsec:4.2.3:ProtArch}

Even though, we have a ready-to-use email client with EmailValet, there were quite many changes to reflect the requirements that were mentioned in section \ref{subsec:4.2.1:ProtReqiAnal}. Since EmailValet dealt with single email messages, and not a group of them as an email client, there were also some modifications needed to be done in order to make the prototype understand whether a message belongs to the campaign or not. In this section, we will briefly see how the changes for the prototype fit into the existing EmailValet's design, and make a technology overview to fully understand how a mass email communication is done.

\paragraph{Identification of a Campaign Message}
An email message consists of a header and body sections as defined by RFC 5322. While a message's header keeps structured information such as "From", "To", "\ac{CC}", Subject, Date, and other information with a special syntax, a message's body contains the content, which is an unstructured text and it is optional to have \citep{rfc5322}. An example email message with its header fields and body can be seen in Appendix \ref{app:EmaiMessForm}.
\vspace{1cm}

One of the fields in an email message's header is called Message-ID\footnote{The message identifier, Message-ID, is enclosed in the angle bracket characters, "<" and ">", an its syntax only permits the dot-atom-text form, which is \verb|1*atext *("." 1*atext)|, on the left-hand side of the "@" and a domain name is recommended for the right-hand side of the "@" \citep{rfc5322}. For example: \verb|<CAF2E4bfH4+GAYHcJFZJ6dTJJ+pux4mTjff2neCS_VR_zVCUY9g@mail.gmail.com>|}, which is a unique message identifier, and set by email clients. The value of a Message-ID is used in another header field, named "In-Reply-To", when a message is a reply to that message.
\vspace{1cm}

EmailValet had already the data model to store an email message's related data when it is synchronized\footnote{Fetching the emails from Gmail is done via the \ac{IMAP} extension that Gmail provides. \ac{IMAP} is a Internet message access standard defined by RFC3501. It allows a client to access and manipulate mail messages on server \citep{rfc3501}. On the other hand, EmailValet uses \ac{SMTP} protocol to connect to the Google's \ac{SMTP} servers to send a composed email in EmailValet. \ac{SMTP} is a mail transport and delivery protocol defined by RFC5321 \citep{rfc5321}.} with Gmail. However, creating a mass email campaign requires to identify if the synchronized email belongs to a mass email campaign created or if it is an answer to a campaign message that was sent before. Because EmailValet's initial design was able to fetch emails from Gmail, then assigning of different properties should follow. The emails composed by EmailValet comes to an existence in the EmailValet database after recipients send a reply to them, since EmailValet fetches them from Gmail's inbox as part of the thread of messages. Therefore, Message-ID and In-Reply-To fields of an email message are leveraged to keep track of a campaign message by setting a Message-ID into it, and store it in a "Campaign" data model as illustrated on \ref{fig:UML_Prototype}. With this, we were able to identify the type of messages during the synchronization with Gmail, whether the message is an initial campaign message, or if it is an answer to a campaign message that was created earlier. Before this, setting a Message-ID was done by EmailValet's "mail" gem\footnote{A Gem or a RubyGem is a software package, containing a packaged Ruby application or library \citep{RubyGemsGuides2013}.} during its execution time without allowing to get its value.

\begin{figure}[htbp]
	\centering
	\begin{pdfpic}
	    \input{imgs/UML_Draw_Prototype.tex}
	\end{pdfpic}
	\caption[Model Dependency of the New Features of EmailValet]{Model Dependency of the New Features of EmailValet}
	\label{fig:UML_Prototype}
\end{figure}

\paragraph{Template and Email Message Relation} Each campaign message composed in EmaiValet is actually a template with dynamic variables in it. Therefore, the campaign messages fetched from Gmail corresponds to a template in EmailValet. This interaction can be seen in figure \ref{fig:UML_Prototype}. As mentioned in the previous section, there is an available tree view when a user replies to a respondent's answer. This tree view's purpose is to let users choose earlier templates to reuse, and give an overview of the latest state of the conversation. The hierarchy between the nodes of the tree is a nested set model, in which each node has a left and a right integer values. The left and right values in a node represent a set of child nodes. The same concept applies for the each child nodes as well; hence, each child node has a left and right value that represents another set of children, as a part of outer nested set. Figure \ref{fig:NestedSetModelTree} depicts a tree in a nested set model.

\begin{figure}[htbp]
	\centering
	\includegraphics[scale=0.70]{imgs/NestedSetModelTree.png}
	\caption[A Nested Set Model Tree Hiererchy]{A Nested Set Model Tree Hiererchy \citep[page 46]{Celko2004}}
	\label{fig:NestedSetModelTree}
\end{figure}

Nested set model helps us on finding a node's children faster than a usual adjacency set model, where each node only keeps information about its parent node, which is the ID \citep[pages 45--47]{Celko2004}. For example, in order to find all the nodes of the root node named "Albert" in figure \ref{fig:NestedSetModelTree}, we just need to find all nodes whose left value is greater than 1, and right value is less than 12. In the adjacency list, however, we first need to find all the nodes whose parent IDs are equal to "Albert's", then for those nodes' IDs, we need to find other nodes whose parent IDs are equal to them, and it continues on until all nodes are finished in the tree in the same way.
\vspace{1cm}

The template data model in \ref{fig:UML_Prototype} keeps those left and right number information in one column named "ancestry", which is populated by a gem named Ancestry\footnote{https://github.com/stefankroes/ancestry}.

\paragraph{\ac{KVP}s Relation with a Campaign and a Message}
As shown in figure \ref{fig:UML_Prototype}, each email message can have more than one value corresponding to a key of \ac{KVP}. This allows us to identify when a \ac{KVP} is added to a message that belongs to a respondent. Keys are organized according to campaigns; therefore, same key's value can be used in different campaigns for different purposes. This is mainly because a word chosen as a key can have different meanings, depending on context.
\vspace{1cm}

After getting an overview of the technical implementation of the prototype, the next section will focus on the evaluation of the prototype by pointing out the missing features of initial requirements due to the limitations on the existing email client, and what new ideas were emerged after the informal user test within the Stanford University.

\section{Evaluation of the Prototype}
\label{sec:4.3:EvalProt}

In this section, we will analyze the limitations of the prototype, despite the fact that it was able to fulfill most of the requirements mentioned in section \ref{subsec:4.2.1:ProtReqiAnal}. Some of these limitations are related with the development of a prototype from an existing application, whose main purpose is different than that of a regular email client. One of the reasons for making a prototype is to let developers and users conceptualize different requirements or review the existing ones. In here is where we will also mention new and different requirements we deducted as we went through the whole process, as well as after the informal user test within the Stanford \ac{HCI} group and with an organization at Stanford University conducting mass email communication regularly to reach their community. As an informal user test, we asked the participants to use the prototype instead of their regular applications or methods to conduct a mass email communication, and collected the feedback.

\subsection{Limitation of the Existing Application}
\label{subsec:4.3.1:LimiEmaiVale}

As mentioned, using EmailValet as an email client on developing a prototype helped us to save time and effort. However, there were some limitations present with it since it focuses on crowd-assisted task manager actions, rather than a simple email client.

\paragraph{Number of Message Limitation}
One of the problems encountered with EmailValet was the limit on the amount of messages synchronized from Gmail. It is limited to the latest 100 messages, to maintain EmailValet's privacy and accountability \citep{Kokkalis2013}. However, a mass email campaign will quickly reach that given limit, which may ignore older emails.

\paragraph{Different Inbox Purpose}
EmailValet offers an email client with a task manager feature, as a replacement to everyone's regular email client. However, a mass email communication is not something a person needs to resort as frequent as a personal email communication. Therefore, a mass email communication application should be separated from a person's regular inbox, since it does not need to show all their emails, except those related to an email campaign. Combining both inboxes also resulted to some drawbacks on the performance while it was synchronizing with Gmail to fetch new emails. It is because EmailValet was also performing some additional steps during the synchronization on the side, such as checking and comparing message headers for changes in the earlier messages up to a date.

\subsection{Limitation of the Prototype}
\label{subsec:4.3.2:ProtDesi}

\paragraph{\ac{KVP}s Relation} In the prototype design, each value of a key belongs to an email message of a respondent. However, we need to see that all \ac{KVP}s are aggregated in a certain way when we browse a set of messages belonging to a specific person. Therefore, assigning \ac{KVP}s to an email message actually means assigning them to a recipient in a mass email campaign. This requires keeping each individual recipient in a separate data model, and relating it with the existing EmailValet's design. Since we have already identified the limitations of EmailValet in the previous section, the decision was to add those enhancements into a new application.

\paragraph{Getting Contact List into the System}
During the informal user test at the Stanford \ac{HCI} group, we realized that the people who performs such mass email communication import their recipient list from a spreadsheet, or a similar data file. Since, the prototype requires them to input a recipient list in a special syntax as mentioned in section \ref{subsec:4.2.2:ProtSyst}, this requires the users to change their existing contact list in a format that the prototype will be able to parse with. This reduces flexibility and adds additional effort on the researchers, whose contact list is already in a data file. With this said, it is a feature considered to be implemented on a different project, separate from EmailValet. 

\section{Conclusion}
\label{sec:4.4:Conc}
In this section, a mass email communication concept was introduced with an illustrative scenario. We pointed out how it could be possible to reduce the efforts on the researchers' side while increasing the personalization of the emails at the same time. Later on, we converted those ideas into software requirements for the prospective prototype, where we introduced its features and architecture. Finally, the informal user test helped us to evaluate the prototype to find out its limitations and to emerge new requirements, which made the basis to the next chapter, where the mentioned limitations are removed and the new requirements are reflected during the final application's iterative design cycles.


\begin{comment}
--> message id yi nasil kullanigini yaz
- fotolar daki guzel database diagramlari kullan

--> FOOTNOTE: ORM niye table demiyon da data model diyon acikla

 Some of those information are related with message threading, where email clients recognized of a message is a reply to another message

- goes into details, so you won't need to talk about in the final product
- Sync process

--> Sonra chapter da IMAP e de deyin biraz buna bakarak gdoc: Myriad - Developer Documentation [Fetching]
--> bu prototype aklimiza gelen ilk ozelligi de anlatiyor de
--> bi section da sorunlar neydi diye yaz bunla ilgili
--> Google Formla nasil kolay data aliniyor diye bahset
--> KVP ler sadece son kampnyayala ilgili, hepsi olsa daha iyi olurdu: drawbacks of prototype'a yaz bunu

difficulty to pick a proper one , --> also no need to see old templates aga in since conversation got advanced


--> kimse boyle bir view sunmuyodu yaz, zendesk de var ama sadece bir kisi icin. Diger ozellikleri de saglayan app yok piyasa da diye ekleme yap

--> don't write a generic email, but personalized, effort var

--> there are many cases for maybe case
--> burada visulization koy ver graph i yapistir. listing olsun dashlerler tree yap
--> yukardakileri paragrah title'i kullnarka yaz

only supports hi part, not all

--> Improvements on the content


--> simdi neler olsa kolaytiririza basla

--> write something about this as well: http://blog.mailchimp.com/how-gmails-new-inbox-is-affecting-open-rates/
-->Merge tags allow you to dynamically add content to your email. 

--> Constant Contact'a limitation lari ekle \cite{ConstantContactInc.2011}, same for \cite{TheRocketScienceGroupLLC2013e}

Exploration
Have they taken any online courses before?

--> - DonÕt forget MichaelÕs graph about golden standard
--> flow chart like in slides
--> - Asking follow-up questions are limited in other methods (see the book page 22: Beyond The Usability Lab - Conducting Large Scale Online User Experience Studies(2010))

%\begin{figure}
%\input{imgs/EmailDiagram}%\caption{A simple block diagram\label{diagram}}%\end{figure}

\end{comment}
