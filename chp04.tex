\chapter{The Initial Idea and the Prototype}
\label{chp:4:InitIdeaProt}
In this chapter, a mass communication schema, and possible exceptional cases will be introduced. Afterwards, the initial prototype will be reviewed, and its drawback will be discussed.

\section{Mass Email Communication Concept}
\label{sec:4.1:MassEmaiCommConc}

When a researcher initiates a mass email communication, there will be many cases that cannot be predicted beforehand, but they affect the flow of the communication. Respondents may come up with clarifying questions to an initial question, email addresses that are considered active might not exist anymore, an auto responder might have been set since the respondent is not available during a temporary period, and many more cases.

\subsection{A Mass Email Communication Scenario}
\label{subsec:4.1.1:Cust}

In section~\ref{sec:1:EmailDataCol}, the online learning platform scenario was used to illustrate the possible reasons for email data collection. If we will consider it in here again, assuming that we are exploring our users to improve our platform. Therefore, we start sending out emails to our registered users to get their permission to ask some questions. This initial email might be similar to listing~\ref{lst:EmaiInvtQest}.
\vspace{1cm}

\lstset {
 basicstyle=\footnotesize,
 frame=shadowbox,
 rulesepcolor=\color{black},
 showspaces=false,showtabs=false,tabsize=4,
 numberstyle=\tiny,
 captionpos=b,
 xleftmargin=0.7cm, xrightmargin=0.5cm,
 lineskip=-0.1em,
 abovecaptionskip=1\baselineskip
}

\begin{lstlisting}[language=, caption={[Email Invitation to Questionnaire for Online Learning Platform]Email Invitation to Questionnaire for Online Learning Platform}, label={lst:EmaiInvtQest}]
Dear John,

you have recently attended the "Cryptography" and the "Natural Language Processing" courses. Do you mind if you answer some questions regarding these courses?

The questionnaire will take only 15 minutes, and it will help us a lot to improve our platform.

Kind regards,
your online course team.
\end{lstlisting}

After the initial invitation email sent to get their permission for the upcoming questionnaire, there are possible answers that we might expect:

\begin{compactenum}
	\item Yes, I would like to involve
	\item No, I am quite busy 
	\item I could involve, but I am busy till the end of this month
	\item An automated message from recipients to indicate his or her vacation period
\end{compactenum}
\vspace{1cm}

Figure~\ref{fig:EmailDiagram} shows a simplified version of this scenario. The people who accepted our invitation will get a second email including the questionnaire. As soon as they respond back with the answers of the questions, we will return a thank you email for the participation. Those who did not accept the invitation will get a motivation email to encourage them for the next time. Next, we will group the people who returned a conditional acceptance under a "maybe" case. Again, there might be several reason for them for instance they might involve in the the questionnaire but they are busy during that week. Hence, we could reply with an email telling an opinion for their situation like if people attend other exams, we can wish good luck for it, and afterwards we can mention about a reminder email that will be send out after a time period that the participants mentioned in their response. After the reminder email, we expect to get a acceptance of the questionnaire email. Then conversation will continue as with the people who initially accepted to involve our research. The communication with an "auto-respond" case is not clear, therefore the communication will not go further with those people until they reply us in the near future. However, if the auto respond provides some information, we could also set a reminder for an upcoming date to send a reminder email.
\vspace{1cm}

\begin{figure}[htbp]
	\includegraphics[width=1.00\textwidth]{imgs/EmailDiagram.png}
	\caption[An Email Campaign Scenario]{An Email Campaign Scenario}
	\label{fig:EmailDiagram}
\end{figure}

Above mentioned sample scenario can be handled manually with individual efforts for a small group of participants. These manual effort will involve the following points:

\begin{compactitem}
	\item Figure out the courses that participants attended for our email list, and add them to the content of the email for each person.
	\item Write a generic answer for those who accepted to involve in the questionnaire, and write the questions.
	\item Write a generic motivation email to support those who did not accept to involve to the questionnaire.
	\item Go over all the "maybe" cases, and record the date information if they mention a time period that they will be willing to participate, but busy at the moment.
	\item Write a generic email to those "maybe" cases mention about the reminder that we will send in the time period that they mentioned. This email can involve a couple sentences to give a feedback and share the feelings about the respondent's situation that make them not to involve to the questionnaire at the moment.
	\item Go over for all the "auto-respond" cases to figure out if there is any condition that we need to ignore those people at all for the upcoming questionnaires in case they change their email addresses, or any date that can be recorded to setup a reminder email later on.
	\item Send a thank you email to those who answered the questionnaire.
\end{compactitem}
\vspace{1cm}

However, when the amount of participants is great, doing this manual work will get harder, and the personalization that is added into the emails will get less. For example, for the "maybe cases", we will not be able to give a feedback or share the feelings about respondent's situation, but just write an email to mention that we will send them a reminder later on. More over, these are simplified possible cases. There might be much more cases in real life situations, which might require to ignore some respondents totally or to write a generic email by again ignoring the context of their email since individual efforts will not be enough to write custom emails for those cases. In such a case, we might even terminate the communication forever, or results in the side effects of diffusion of responsibility theory as mentioned in section~\ref{sec:2.3:PersEmai}.
\vspace{1cm}

In the figure~\ref{fig:ChartEffortCustom}, you see that the personalization of emails is directly proportional to the effort of composing those emails. The shaded are on the graph represent the situation, when researchers use an application to create mass email communication, while the area marked with a star represents the gold standard, really hard to reach with the available applications. 
\vspace{1cm}

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.40\textwidth]{imgs/ChartEffortCustom.png}
	\caption[Effort vs Personalization on Composing Email]{Effort vs Personalization on Composing Email}
	\label{fig:ChartEffortCustom}
\end{figure}

In the next section, we will see that how can we help researchers to reduce the efforts, and increase the personalization of the emails.

\subsection{Possible Improvements to Reduce Efforts}
\label{subsec:4.1.2:ImprReduEffo}

After a mass email communication scenario was described in the previous section, we will see the possible improvements in this section to reduce the efforts on the researchers' side, as well as increasing the personalization in the content in some degree.

\paragraph{Contact Information}
The first step would be to import contacts, and their relevant information. These could the information that we asked for during the sign up form when they registered to our learning platform e.g. first and last name, email address, and gender. Therefore, we could easily export those information into a file format like Excel or CSV\footnote{CSV stands for comma separated values, and is a plain-text file to store tabular data to often exchange data between disparate applications \citep{Repici2010}. } to make it ready to use to initiate our mass email conversation. The application that was discussed in section~\ref{sec:3.3:Resul} offers several options to import data into those systems. Hence, researcher will not need to enter all those information manually into those systems.

\paragraph{Dynamic Variables}
The invitation email included user specific data, which are the name of the recipients at the salutation, and the courses that he or she attended. As it is hard to write those fields individually into all the emails, we could apply dynamic variables insertion approach that is used by both email marketing applications (MailChimp and Constant Contact) and one of the \ac{CRM} application (SugarCRM) analyzed in section~\ref{sec:3.3:Resul}. However, the limitation of SugarCRM was that it only allows us to record a limited amount of contact profile fields. This could help us only to dynamic generation of the salutations in the emails not the course list of the recipients. On the other hand, Constant Contact and MailChimp have the feature to add custom fields into a contact profile, and dynamically use them in the emails' content. So, this could also remove the manual effort on the initial invitation email with an email template who has some dynamic fields to be replaced by the application while sending the emails. Those dynamic fields also add some degree of personalization into the emails.

\paragraph{Information Extraction}
When we start getting answers from respondents, we might need to extract some information from those emails. For example, this could be a date that we need to return to the recipients with a reminder as it is discussed in section~\ref{subsec:4.1.1:Cust}. Storing those information as we stored contact information might allow us to easily access them again, and gives an opportunity to reuse them in the email content as a dynamic variable.

\paragraph{Reusability of Existing Emails}
After the initial invitation email, there will be many cases to reuse different versions of an email for further states of the conversations. We mentioned the term "template" as an email consisting some dynamic variables in it. Later on, those variables will get their actual values, and it will be the actual message that we want to send. Here, we will add another meaning to the term "template" to emphasize a message's reusability. Let us consider the "maybe" case that was mentioned in section~\ref{subsec:4.1.1:Cust} to represent respondents who were too busy to participate in the questionnaire at that moment, but maybe it is possible for them to participate in later (See figure~\ref{fig:EmailDiagram}). In those responds, recipients will come up with a date that is possible for them to participate, or an unclear answer about the availability of themself. It is definite that we cannot ignore if they provide us a date, and send them a reminder before that date to participate in the questionnaire in a generic email. This will make them realize that the messages that we send are automated, and it will result the drawbacks that we discussed in chapter~\ref{chp:FouRelWor}. However, if we create two email templates: one with a dynamic variable in it to mention when we will send a reminder, and another one with a more generic content including a time far enough to encourage them to participate in the questionnaire. Therefore, when we encounter different "maybe" conditions, we have now two ready to use email templates to reply them.

\paragraph{Visualization of Conversation State}
At this point, we begin to have several email templates for different conditions to ease a researcher's life by allowing reusability on the replies. However, it has also started to be difficult to pick a template to use since the state of conversation get advanced, and we have had many email templates for different conditions. This will result in additional effort to choose the proper template. Besides, we will not need some of the templates after conversation's state get further, and use the latest ones more frequently than the older ones. Therefore, we need a view to show us what the current state of the conversation is, as well as allow us to pick the proper template by leveraging this view.
\vspace{1cm}

Figure~\ref{fig:ConvStatView} represents a view in a directory tree structure for this purpose. All the possible email messages that we wrote are collected in a hierarchical way starting with the first invitation email at the root node. After the researcher started to get messages from respondents, all the following answers that we can write are at the second level of the tree right after the invitation email node. When ever we get an answer for the questionnaire, we write an email to say thank you. This is also represented in the third level of the tree, right after the questionnaire node.
\vspace{1cm}

\begin{figure}[htbp]
	\dirtree{%
	.1 Invitation Email.
	.2 Questionnaire - Graduate Version (GV).
	.3 Thank You GV.
	.2 Questionnaire.
	.3 Thank You.
	.2 Questionnaire After Reminder.
	.2 Next Time.
	.2 Next Time with Motivation.
	.2 Reminder with Date.
	.2 Reminder Generic.
	.2 \vdots.
	}
	\caption[A Sample Conversation State and Template View]{A Sample Conversation State and Template View}
	\label{fig:ConvStatView}
\end{figure}

A view like in figure~\ref{fig:ConvStatView} also help researchers to let them pick a template to reuse according to the email of the respondents. Therefore, they can easily see the previous answers that they gave, and the level of the tree provides an idea on the overall state of the conversation. When we consider existing applications in the market in section~\ref{sec:3.3:Resul}, none of them provides such a conversation view, and available templates had to be chosen from a mixed list which includes messages belonging to other conversations as well.
\vspace{1cm}

Finally, after reviewing these initial information gathering to figure out how can we ease the efforts of the researchers, while keeping the personalization in the emails high, the next section will show how this initial idea was applied into an application.


\section{Prototype}
\label{sec:4.2:Prot}
A software prototype provides developers a better understanding of the requirements, what could be developed with existing technology, and by allowing client interaction, it demonstrates them what is functionally feasible, and revise their imagination accordingly, which results in better inputs from them and more forward looking systems \citep{Bernstein1996}. In this section, we will analyze the requirements, and the actual prototype.

\subsection{Requirements Analysis}
\label{subsec:4.2.1:ProtReqiAnal}

In section~\ref{subsec:4.1.2:ImprReduEffo}, we initially considered some features to improve a researcher's personalized mass email communication. Following points will put those findings into a summary to describe them as requirements of the prototype:

\begin{compactenum}
	\item Contact information can come from different sources, assuming we have at least recipients' first names, last names, and email addresses. The application must store those information under a contact list permanently. 
	\item Application user can use variables in the email message for a recipient's first name and last name. Therefore, application must allow user to add those dynamic variables into email's content to personalize the salutation of the emails.
	\item Application user can extract information from an email message into a \ac{KVP}\footnote{A key-value pair (KVP) represents two conntected data items, where a key is a unique identifier for some data items, and the value can be again a data item or a pointer to the location of data \citep{Rouse2008}. In this context, this thesis uses \ac{KVP} in the context of extracted information as values, and a unique key to represent its class. For example, "first name" can be a key, and each recipients first names will be a value for the "first name" key.} while reading responds. Therefore, the application must offer an option to get \ac{KVP}s from users. At the end, each contact's record will have enough information saved in \ac{KVP} to describe all details that we know about them.
	\item The application must allow users to use those extracted \ac{KVP}s as dynamic variables in the email content. This will allow us to personalize the email with the information specific to each recipients.
	\item User can reuse a sent email as a template to reply to respondents or initiate a conversation for a group of people. Therefore, application must offer a view to pick the templates from a list.
	\item Application must show the whole state of the conversation. Therefore, the template list can be showed in a directory tree structure as in figure~\ref{fig:ConvStatView}. Each node must represent the templates that the user created, and have a given template name by the user.
	\item Application must offer the template selection and conversation state representation under one view. Therefore, user should be able to pick the templates to reuse by looking at nodes in the tree to figure out the state of the conversation .
\end{compactenum}

The next will introduce the implemented prototype to satisfy the initial idea of a personalized mass email communication system, and analyze how the aforementioned requirements are satisfied or not in the evaluation of the prototype.

\subsection{System}
\label{subsec:4.2.2:ProtSyst}

Initial system was built on top of an existing project named as EmailValet\footnote{https://www.gmailvalet.com/} also known as GmailValet in \ac{HCI} group\footnote{https://hci.stanford.edu/} at Stanford University. EmailValet is a \ac{SaaS} application that combines an email client with a task manager. Remote assistants from an expert crowdsourcing marketplace extract tasks from incoming emails, and annotate them in a task list separated from the inbox \citep{Kokkalis2013}.
\vspace{1cm}

Having a ready-to-use email client to implement the first version of the personalized mass email communication system helped us to save time and effort, and make us focus on the initial requirements as discussed in section~\ref{subsec:4.2.1:ProtReqiAnal}. From the technology point of view, we were also limited with the existing EmailValet's architecture, which was developed in a Web framework \ac{RoR}\footnote{http://rubyonrails.org/}, a JavaScript framework jQuery\footnote{http://jquery.com/}, and a \ac{CSS} framework Twitter Bootstrap\footnote{http://getbootstrap.com/}.
\vspace{1cm}

EmailValet requires a Gmail account to register and sign in\footnote{EmailValet uses an open protocol named OAuth to provide credentials for authentication with Gmail. OAuth's community webpage is at http://oauth.net/} to the system, therefore application's users have to grant access to EmailValet before using it. Figure \ref{fig:GmailValetInbox} shows EmailValet's inbox view after a user signed in and browse to a campaign\footnote{In this thesis, the word campaign is used as a shorhand for a mass email communication campaign, where a researcher initiates a conversation with groups of people related to one specific topic.}. On the left hand side, there is the email list pane, and a selected email can be read on the reading pane, at right.

\clearpage
 
\begin{figure}[H]
	\centering
	\includegraphics[width=1.00\textwidth]{imgs/GmailValetInbox.png}
	\caption[EmailValet Inbox View and Message Reading Pane]{EmailValet Inbox View and Message Reading Pane}
	\label{fig:GmailValetInbox}
\end{figure}

Starting a campaign is done exactly the same way as in composing an email. However, the corresponding view has additional two input fields to get the campaign's and the template's names from the user. A campaign name will help to identify the groups of conversations from other campaigns, or from regular email conversations in the inbox. A template name will help us to identify which respondents's answers correspond to which emails that we sent. For example, in figure \ref{fig:GmailValetInbox}, the recipient's answer is response to the questionnaire invitation that we sent earlier. A template name will also help us to represent the template in a tree structure to pick from to reuse, and show the state of the conversation in the same tree structure.
\vspace{1cm}

Researcher can add their recipients list into the "Merge"\footnote{The word "merge" comes from the term "mail merge", which means a procedure to enable to combine a document with data files consisting a list of names. Therefore, the copies of the document will be different for each person it is sent to \citep{CollinsEnglishDictionary2013}.} input field as in the figure \ref{fig:ComposePaneWithTemplates}, which corresponds to the "To" field in a regular email client. However, the format should be as in the figure, that is the first name, the last name, and the email address written in angle brackets. Hence, those fields can be used dynamically in the salutation of the emails by writing one of the variables of \textit{\{\{first\_name\}\}} and \textit{\{\{last\_name\}\}}. Once that recipients list is entered, and the email is sent, those contacts will be recorded in the Gmail's contacts book.
\vspace{1cm}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.70]{imgs/ComposePaneWithTemplates.png}
	\caption[Email Template Selection to Reuse Earlier Replies]{Email Template Selection to Reuse Earlier Replies}
	\label{fig:ComposePaneWithTemplates}
\end{figure}

Figure \ref{fig:ComposePaneWithTemplates} also shows the template tree to represent the state of the conversation, and allow users to select a template from. The indentation at the nodes of the tree helps to identify which templates are used after which one, and therefore it gives an idea about the current state of the conversation. According to this sample scenario in the figure, right after we sent the invitation email, and started to get responds, there were two possible answers that we gave to the recipients. For those who rejected the invitation, we can select the "Rejected" node from the tree to reuse that answer that we gave before. This can be a motivation email as discussed in section \ref{subsec:4.1.2:ImprReduEffo}. At the parallel, the conversation continued with the people who accepted the invitation, and we continued to the conversation by sending \ac{NDA}, and afterwards the questionnaire. After we sent the questionnaire, there were cases, where respondents returned back with an email to ask some questions to clarify the questions in the questionnaire. According to figure \ref{fig:ComposePaneWithTemplates}, those cases were related to the questions number 3 and 18, and we explained those two questions of the questionnaire. Again, since the system allow us to reuse the our previous answers as a template, we don't need to rewrite our explanation if those questions were not clear for upcoming prospective people. On the other hand, if researchers want to create a new template, he or she can simply add the name of the template into the corresponding input field, and send the email. The next time, the researcher will find it in the template tree under the corresponding level of the node. Also, it is possible to select a template, made some modification, and save it as a new template. Therefore, a slightly different versions of templates can be reused during the communication as well.
\vspace{1cm}

Finally, there is an option to add \ac{KVP}s while reading the respondents' answers. In the reading pane, two input fields are offered to enter a key and its value corresponding to the extracted information from those emails while reading them. As in the figure \ref{fig:EMailKVPs}, while a user can add new \ac{KVP}s, they can also see the existing ones added earlier to that email message.

\begin{figure}[htbp]
	\centering
	\includegraphics[scale=0.75]{imgs/EMailKVPs.png}
	\caption[Extracted Key-Value Pairs and Input Fields to Add New Ones]{Extracted Key-Value Pairs and Input Fields to Add New Ones}
	\label{fig:EMailKVPs}
\end{figure}

In conclusion, while the prototype satisfied many of the initial requirements that was discussed in section \ref{subsec:4.2.1:ProtReqiAnal}, there were some drawbacks that will be mentioned in the section \ref{sec:4.3:EvalProt} to explain why it was discarded instead of making into the production code. But before that, we will go into some implementation details about EmailValet's mass email communication modifications in the next section.

\subsection{Architecture}
\label{subsec:4.2.3:ProtArch}

Even though, we had a ready-to-use email client with EmailValet, there were quite bit changes to reflect the requirements that was mentioned in section \ref{subsec:4.2.1:ProtReqiAnal}. Since EmailValet was dealing with single email messages not a group of them as a email client, there were also some modifications to make the prototype understand whether a message belongs to a campaign or not. In this section, we will briefly see how the changes for the prototype fit into existing EmailValet's design, and make a technology overview to understand how a mass email communication is done.

\paragraph{Identification of a Campaign Message}
An email message consists header and body sections as defined by RFC 5322. While a message's header keeps structured information such as "From", "To", "\ac{CC}", Subject, Date, and other information with a special syntax, a message's body consists the content, which is an unstructured text and it is optional to have \citep{rfc5322}. An example email message with its header fields and body can be seen in Appendix \ref{app:EmaiMessForm}.
\vspace{1cm}

One of the fields in an email message's header is called Message-ID\footnote{The message identifier, Message-ID, is enclosed in the angle bracket characters, "<" and ">", an its syntax only permits the dot-atom-text form, which is \verb|1*atext *("." 1*atext)|, on the left-hand side of the "@" and a domain name is recommended for the right-hand side of the "@" \citep{rfc5322}. For example: \verb|<CAF2E4bfH4+GAYHcJFZJ6dTJJ+pux4mTjff2neCS_VR_zVCUY9g@mail.gmail.com>|}, which is a unique message identifier, and set by email clients. The value of a Message-ID is used in another header field, named In-Reply-To, when a message is a reply to that message.
\vspace{1cm}

EmailValet had already the data model to store an email message's related data when it is synchronized\footnote{Fetching the emails from Gmail is done via the \ac{IMAP} extension that Gmail provides. \ac{IMAP} is a internet message access standard defined by RFC3501. It allows a client to access and manipulate mail messages on server \citep{rfc3501}. On the other, EmailValet uses \ac{SMTP} protocol to connect to the Google's \ac{SMTP} servers to send a composed email in EmailValet. \ac{SMTP} is a mail transport and delivery protocol defined by RFC5321 \citep{rfc5321}.} with Gmail. However, creating a mass email campaign requires to identify if the synchronized email belongs to a mass email campaign that was created or if it is an answer to a campaign message that was sent before. Because, EmailValet's initial design were able to fetch emails from Gmail, then assign properties afterwards. The emails composed by EmailValet are become exist in EmailValet after recipients sent a reply to them, since then EmailValet fetches them from Gmail's inbox as a thread of messages. Therefore, Message-ID and In-Reply-To fields of an email message are leveraged to keep track of a campaign message by setting a Message-ID into it, and store in a Campaign data model as in figure \ref{fig:UML_Prototype}. Hence, we were able to identify the messages during the synchronization with Gmail whether a message is an initial campaign message, or if it is an answer to a campaign message that was created earlier. Before, setting a message-ID was done by EmailValet's "mail" gem\footnote{A Gem or a RubyGem is a software package, containining a packaged Ruby application or library \citep{RubyGemsGuides2013}.} during its execution time without allowing to get its value.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=1.00\textwidth]{imgs/UML_Draw_Prototype.png}
	\caption[Model Dependency of the New Features of EmailValet]{Model Dependency of the New Features of EmailValet}
	\label{fig:UML_Prototype}
\end{figure}

\paragraph{Template and Email Message Relation} Each campaign message that is composed in EmaiValet is actually a template with dynamic variables in it. Therefore, the campaign messages that are fetched from Gmail correspond to a template in EmailValet. This relation can be seen in figure \ref{fig:UML_Prototype}. As it was mentioned in the previous section, there is a tree view when a user replies a respondent's answer. This tree view's purpose was to choose earlier templates to reuse, and give a visualization of the latest state of the conversation. The hierarchy between the nodes of the tree is a nested set model, in which each node has a left and a right integer values. The left and right values in a node represent a set of child nodes. The same keeps for the each child nodes as well, hence each child node has a left and right value that represent another set of children, as a part of outer nested set. Figure \ref{fig:NestedSetModelTree} depicts a tree in a nested set model.

\begin{figure}[htbp]
	\centering
	\includegraphics[scale=0.70]{imgs/NestedSetModelTree.png}
	\caption[A Nested Set Model Tree Hiererchy]{A Nested Set Model Tree Hiererchy \citep[page 46]{Celko2004}}
	\label{fig:NestedSetModelTree}
\end{figure}

Nested set model helps us to find a node's children faster than a usual adjacency set model, where each node only keeps information about its parent node, which is the id \citep[pages 45--47]{Celko2004}. For example, to find all the nodes of the root node named "Albert" in figure \ref{fig:NestedSetModelTree}, we just need to find all nodes whose left value is greater than 1, and right value is less than 12. In adjacency list, however, we first need to find all the nodes whose parent ids are equal to "Albert"s id, then for those nodes' ids, we need to find other nodes whose parent ids are equal to them, and it continues until all nodes are finished in the tree in the same way.
\vspace{1cm}

The template data model in \ref{fig:UML_Prototype} keeps those left and right number information in one column named "ancestry", which is populated by a gem named Ancestry\footnote{https://github.com/stefankroes/ancestry}.

\paragraph{\ac{KVP}s Relation with a Campaign and a Message}
As in figure \ref{fig:UML_Prototype}, each email message can have more than one values that correspond to a key of \ac{KVP}. This allows us to identify, when a \ac{KVP} is added to a message that belongs to a respondent. Keys are organized according to the campaigns, therefore same key's value can be used in different campaigns for different purposes. This is mainly because, a word chosen as a key can have different meanings depending on context.
\vspace{1cm}

After getting an overview of the technical implementation of the prototype, the next section will focus on what was missing on this initial design comparing with initial requirements described in section \ref{subsec:4.2.1:ProtReqiAnal}, the problems with it, and which new ideas that it was emerged.

\section{Evaluation of the Prototype}
\label{sec:4.3:EvalProt}

In this section, we will analyze what are the drawbacks of the prototype, even though it fulfilled most of the requirements mentioned in \ref{subsec:4.2.1:ProtReqiAnal}. Some of these drawbacks were related with developing a prototype on an existing application whose main purpose was different than a regular email client. As one of the reason for prototyping is to make developers and users realize the new requirements or review the existing ones, we will also mention where we realized some new requirements, and as a result the new feature ideas.

\subsection{Limitation of the Existing Application}
\label{subsec:4.3.1:LimiEmaiVale}

As it is mentioned, using EmailValet as an email client to start developing a prototype helped us to save time and effort. However, there were some limitations with it since its purpose was a crowd-assisted task manager rather than a simple email client.

\paragraph{Number of Message Limitation}
One of the problem with EmailValet was its limit on the amount of messages that are synchronized from Gmail. It was limited to the latest 100 messages as a technique for EmailValet's privacy and accountability \citep{Kokkalis2013}. However, a mass email campaign will reach quickly to that limit, and it might ignore some of the older emails.

\paragraph{Different Inbox Purpose}
EmailValet was offering an email client with a task manager feature as a replacement of people's regular email client. However, a mass email communication is not something that a person does on a daily basis like their personal email communication. Therefore, a mass email communication application should be separated from a person's regular inbox since it does not need to show all the emails except the ones related to an email campaign. Combining both inboxes also resulted drawbacks on the performance when it synchronized with Gmail to fetch new emails. Because, EmailValet was also performing some additional steps during the synchronization such as checking and comparing the message headers to find the changes in the last 100 emails.

\subsection{Limitation of the Prototype}
\label{subsec:4.3.2:ProtDesi}

\paragraph{\ac{KVP}s Relation} In the prototype design, each value of a key belongs to an email message of a respondent. However, we need to see all \ac{KVP}s in an aggregated way when we browse to a message belonging to a specific person. Therefore, assigning \ac{KVP}s to an email message actually means that assigning them to a contact in a mass email campaign. This requires to keep each individual contacts in a separate data model, and relating it with the existing EmailValet's design. Since we already spotted the limitations of EmailValet in the previous section, the decision was adding those enhancements into a new application.

\paragraph{Getting Contact List into the System}
At Stanford \ac{HCI} group, we realized that people who do such a mass email communication import their contact list from a spreadsheet or a similar data store. Since, the prototype requires to input a contact list in a special syntax that was mentioned in section \ref{subsec:4.2.2:ProtSyst}, this makes the users change their existing contact list in a format that the prototype will be able to parse. This reduces flexibility, and adds an additional effort to the researchers who have already a contact list ready in a data file. Again, it was a feature where it would be better to start implementing it in a new project separated from EmailValet. 

\section{Conclusion}
\label{sec:4.4:Conc}
In this section, a mass email communication concept was introduced with an illustrative scenario. We pointed out how could be possible to reduce the efforts on the researchers' side, while to increase the personalization of the emails. Later, we collected those ideas as software requirements for the prospective prototype, where we introduced the features and their architecture. Finally, the evaluation of the prototype made the basis to the next chapter, where the mentioned limitations are removed or minimized on the final design, and the new requirements are created from the feedbacks of the users' during the final application's iterative design cycles.


\begin{comment}
--> message id yi nasil kullanigini yaz
- fotolar daki guzel database diagramlari kullan

--> FOOTNOTE: ORM niye table demiyon da data model diyon acikla

 Some of those information are related with message threading, where email clients recognized of a message is a reply to another message

- goes into details, so you won't need to talk about in the final product
- Sync process

--> Sonra chapter da IMAP e de deyin biraz buna bakarak gdoc: Myriad - Developer Documentation [Fetching]
--> bu prototype aklimiza gelen ilk ozelligi de anlatiyor de
--> bi section da sorunlar neydi diye yaz bunla ilgili
--> Google Formla nasil kolay data aliniyor diye bahset
--> KVP ler sadece son kampnyayala ilgili, hepsi olsa daha iyi olurdu: drawbacks of prototype'a yaz bunu

difficulty to pick a proper one , --> also no need to see old templates aga in since conversation got advanced


--> kimse boyle bir view sunmuyodu yaz, zendesk de var ama sadece bir kisi icin. Diger ozellikleri de saglayan app yok piyasa da diye ekleme yap

--> don't write a generic email, but personalized, effort var

--> there are many cases for maybe case
--> burada visulization koy ver graph i yapistir. listing olsun dashlerler tree yap
--> yukardakileri paragrah title'i kullnarka yaz

only supports hi part, not all

--> Improvements on the content


--> simdi neler olsa kolaytiririza basla

--> write something about this as well: http://blog.mailchimp.com/how-gmails-new-inbox-is-affecting-open-rates/
-->Merge tags allow you to dynamically add content to your email. 

--> Constant Contact'a limitation lari ekle \cite{ConstantContactInc.2011}, same for \cite{TheRocketScienceGroupLLC2013e}

Exploration
Have they taken any online courses before?

--> - DonÕt forget MichaelÕs graph about golden standard
--> flow chart like in slides
--> - Asking follow-up questions are limited in other methods (see the book page 22: Beyond The Usability Lab - Conducting Large Scale Online User Experience Studies(2010))

%\begin{figure}
%\input{imgs/EmailDiagram}%\caption{A simple block diagram\label{diagram}}%\end{figure}

\end{comment}
