\chapter{Initial Idea and the Prototype}
\label{chp:4:InitIdeaProt}
In this chapter, a mass communication schema, and possible exceptional cases will be introduces. Afterwards, the initial prototype will be reviewed, and its drawback will be discussed.

\section{Mass Email Communication Concept}
\label{sec:4.1:MassEmaiCommConc}

When a researcher initiate a mass email communication, there will be many cases that cannot be predicted beforehand, but they affect the flow of the communication. Respondents may come up with clarifying questions to initial question, email addresses that are considered active might not be exist anymore, an auto responder might been set since the respondent is not available during a temporary period, and many more cases.

\subsection{A Mass Email Communication Scenario}
\label{subsec:4.1.1:Cust}

In section~\ref{sec:1:EmailDataCol}, the online learning platform scenario was used to illustrate the possible reasons for email data collection. If we consider it in here again, assuming that we are exploring our users to improve our platform. Therefore, we start sending out emails to our registered users to get their permission to ask some questions. This initial email might be similar to listing~\ref{lst:EmaiInvtQest}.
\vspace{1cm}

\begin{lstlisting}[language=, caption={[Email Invitation to Questionnaire for Online Learning Platform]Email Invitation to Questionnaire for Online Learning Platform}, label={lst:EmaiInvtQest}]
Dear John,

you have recently attended the "Cryptography" and the "Natural Language Processing" courses. Do you mind if you answer some questions regarding these courses?

The questionnaire will take only 15 minutes, and it will help us a lot to improve our platform.

Kind regards,
your online course team.
\end{lstlisting}

After the initial invitation email to get their permission for upcoming questionnaire. There are possible answers that we might expect:

\begin{compactenum}
	\item Yes, I would like to involve
	\item No, I am quite busy 
	\item I could involve, but I am busy till the end of this month
	\item An automated message from recipients to indicate his or her vacation period
\end{compactenum}
\vspace{1cm}

Figure~\ref{fig:EmailDiagram} shows a simplified version of this scenario. The people who accepted our invitation will get a second email including the questionnaire. As soon as they responds back with the answers of the questions, we will return a thank you email for the participation. For those who did not accept the invitation will get a motivation email to encourage for the next time. Next, some people returned conditional acceptance, which we collected them under a "maybe" case. Again, there might be several reason for them for instance they might involve in the the questionnaire but they are busy during that week. Hence, we could reply with an email telling an opinion for their situation like if people attend other exams, we can wish a good luck for it, and afterwards we can mention about a reminder email that will be send out after a time period where participants mentioned in their response. After the reminder email, we will expect to get a acceptance of the questionnaire email. Then conversation will continue as with the people who initially accepted to involve our research. The communication with auto respond case is not clear, therefore the communication will not go further with those people until they reply us in the near future. However, if the auto respond provides some information, we could also set a reminder for a upcoming date to send a reminder email.
\vspace{1cm}

\begin{figure}[htbp]
	\includegraphics[width=1.00\textwidth]{imgs/EmailDiagram.png}
	\caption[An Email Campaign Scenario]{An Email Campaign Scenario}
	\label{fig:EmailDiagram}
\end{figure}

Above mentioned sample scenario can be handled manually with individual efforts for a small group of participants. These manual effort will involve following points:

\begin{compactitem}
	\item Figure out the courses that participants attended for our email list, and add them to the content of the email for each person
	\item Write a generic answer for those who accepted to involve to the questionnaire, and write the questions
	\item Write a generic motivation email to support those who did not accept to involve to the questionnaire
	\item Go over for all the "maybe" cases, and record the date information if they mention a time period that they will be willing to participate, but busy at the moment.
	\item Write a generic email to those "maybe" cases mention about the reminder that we will send in the time period that they mentioned. This email can involve a couple sentences to give a feedback and share the feelings about respondent's situation that make them not to involve to the questionnaire at the moment.
	\item Go over for all the "auto-respond" cases to figure out if there is any condition that we need to ignore those people at all for the upcoming questionnaires in case they change their email addresses, or any date that can be recorded to setup a reminder email later on.
	\item Send a thank you email to those who replied with the answers of the questionnaire
\end{compactitem}
\vspace{1cm}

However, when the amount of participants is great, the possibility of doing this manual work will get harder, and the personalization that is added into emails will get less. For example, for the "maybe cases", we will not be able to give a feedback or share the feelings about respondent's situation, but just write an email to mention that we will send them a reminder later on. More over, these are simplified possible cases. There might be much more cases in real life situation, where it might require to ignore some respondents totally or writing a generic email by again ignoring the context of their email since individual efforts will not be enough to write custom emails for those cases. In such a case, we might even break up the communication forever, or results in the side effects of diffusion of responsibility theory as mentioned in section~\ref{sec:2.3:PersEmai}.
\vspace{1cm}

In the figure~\ref{fig:ChartEffortCustom}, you see that the personalization of emails is directly proportional to the effort to compose those emails. The shaded are on the graph represent the situation, when researchers use an application to create mass email communication, while the area marked with star represent the standard where where it is really hard to reach with the available applications. 
\vspace{1cm}

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.40\textwidth]{imgs/ChartEffortCustom.png}
	\caption[Effort vs Personalization on Composing Email]{Effort vs Personalization on Composing Email}
	\label{fig:ChartEffortCustom}
\end{figure}

In the next section, we will see that how can we help to researchers to reduce the efforts, and increase the personalization of the emails.

\subsection{Possible Improvements to Reduce Efforts}
\label{subsec:4.1.2:ImprReduEffo}

After a mass email communication scenario was described in the previous section, we will see the possible improvements in this section to reduce the efforts on the researchers' side, as well as increasing the personalization in the content in some degree.

\paragraph{Contact Information}
The first step would be to import contacts, and their relevant information. These could the information that we asked during the sign up form when they registered in our learning platform e.g. first and last name, email address, and gender. Therefore, we could easily export those information into a file format like Excel or CSV\footnote{CSV stands for comma separated values, and is a plain-text file to store tabular data to often exchange data between disparate applications \citep{Repici2010}. } to make it ready to use to initiate our mass email conversation. The application that was discussed in section~\ref{sec:3.3:Resul} offers several options to import data into those systems. Hence, researcher will not require to enter all those information manually into those systems.

\paragraph{Dynamic Variables}
The invitation email had user specific data, which are the name of the recipients at the salutation, and the courses that he or she attended. As it is hard to write those fields individually into all the emails, we could apply dynamic variables insertion approach that is used with both email marketing applications (MailChimp and Constant Contact) and one of the \ac{CRM} application (SugarCRM) analyzed in section~\ref{sec:3.3:Resul}. However, the limitation of SugarCRM was that it only allows us to record limited amount of contact profile fields. This could help us only to dynamic generation of the salutations in the emails not the course list of the recipients. On the other hand, Constant Contact and MailChimp have the feature to add custom fields into a contact profile, and dynamically use them in the emails' content. So, this could also remove the manual effort on the initial invitation email with an email template who has some dynamic fields to be replaced by the application while sending the emails. Those dynamic fields also add some degree of personalization into the emails.

\paragraph{Information Extraction}
When we start getting answers from respondents, we might need to extract some information from those emails. For example, this could be a date that we need to return to the recipients with a reminder as it is discussed in section~\ref{subsec:4.1.1:Cust}. Storing those information as we stored contact information might allow us easily access them again, and gives an opportunity to reuse them in the email content as a dynamic variable.

\paragraph{Reusability of Existing Emails}
After the initial invitation email, there will be many cases to reuse different versions of an email for further states of the conversations. We mentioned the term "template" as an email consisting of some dynamic variables in it. Later on, those variables will get their actual values, and it will be the actual message that we want to send. Here, we will add another meaning to the term "template" to emphasize a message's reusability. Let us consider the "maybe" case that was mentioned in section~\ref{subsec:4.1.1:Cust} to represent respondents who were busy to participate in the questionnaire at that moment, but maybe it is possible for them to participate in later (See figure~\ref{fig:EmailDiagram}). In those responds, recipients will come up with a date that is possible for them to participate, or an unclear answer about the availability of them. It is definite that we cannot ignore if they provide us a date, and send them a reminder before that date to participate in the questionnaire in a generic email. This will make them realize that the messages that we send are automated, and it will result the drawbacks that we discussed in chapter~\ref{chp:FouRelWor}. However, if we create two email templates: one with a dynamic variable in it to mention when we will send a reminder, and another one with a more generic content including a time far enough to encourage them to participate in the questionnaire. Therefore, when we encounter different "maybe" conditions, we have now two ready to use email templates to reply them.

\paragraph{Visualization of Conversation State}
At this point, we have began to have several email templates for different conditions to ease a researcher's life by allowing reusability on the replies. However, it has also started to difficult to pick a template to use since the state of conversation get advanced, and we have had many email templates for different conditions. This will result in additional effort to find the proper template to choose from. Besides, we will not need some of the templates after conversation's state get further, and use the latest ones more frequently than the older ones. Therefore, we need a view to show us what the current state of the conversation is, as well as allow us to pick the proper template by leveraging this view.
\vspace{1cm}

Figure~\ref{fig:ConvStatView} represents a view in a directory tree structure for this purpose. All the possible email messages that we wrote are collected in a hierarchical way starting with the first invitation email at the root node. After researcher started to get messages from respondents, all the following answers that we can write are at the second level of the tree right after the invitation email node. When ever we get an answer for the questionnaire, we write a email to say thank you. This is also represented in the third level of the tree, right after the questionnaire node.
\vspace{1cm}

\begin{figure}[htbp]
	\dirtree{%
	.1 Invitation Email.
	.2 Questionnaire - Graduate Version (GV).
	.3 Thank You GV.
	.2 Questionnaire.
	.3 Thank You.
	.2 Questionnaire After Reminder.
	.2 Next Time.
	.2 Next Time with Motivation.
	.2 Reminder with Date.
	.2 Reminder Generic.
	.2 \vdots.
	}
	\caption[A Sample Conversation State and Template View]{A Sample Conversation State and Template View}
	\label{fig:ConvStatView}
\end{figure}

A view like in figure~\ref{fig:ConvStatView} also help researchers to let them pick a template to reuse according to the email of the respondents. Therefore, they can easily see the previous answers that they gave, and the level of the tree provides an idea on the overall state of the conversation. When we consider existing applications in the market in section~\ref{sec:3.3:Resul}, none of them provided such a conversation view, and available templates had to be chosen out of mixed list which includes messages belonging other conversations as well.
\vspace{1cm}

Finally, after reviewing these initial information gathering to figure out how can we ease the efforts of the researchers, while keeping the personalization in the emails high, next section will show how this initial idea was applied into an application.


\section{Prototype}
\label{sec:4.2:Prot}
A software prototype provides developers a better understanding of the requirements, what could be developed with existing technology, and by allowing client interaction, it demonstrates them what is functionally feasible, and revise their imagination accordingly, which results better inputs from them and more forward looking systems \citep{Bernstein1996}. In this section, we will analyze the requirements, and the actual prototype.
\vspace{1cm}

\subsection{Requirements Analysis}
\label{subsec:4.2.1:ProtReqiAnal}

In section~\ref{subsec:4.1.2:ImprReduEffo}, we initially considered some features to improve a researcher's personalized mass email communication. Following points will put those findings into a summary to describe them as requirements of the prototype.

\begin{compactitem}
	\item Contact information can come from different sources, and assuming we have at least recipients' first names, last names, and email addresses. Application must store those information under a contact list permanently. 
	\item Application user can use place holders for first and last names, therefore application must allow user to add those dynamic variables into email's content to personalize the salutation of the emails.
	\item Application user can extract information while reading responds into a \ac{KVP}\footnote{A key-value pair (KVP) represents two conntected data items, where a key is a unique identifier for some data items, and the value can be again a data item or a pointer to the location of data \citep{Rouse2008}. In this context, this thesis uses \ac{KVP} in the context of extracted information as values, and a unique key to represents its class. For example, "first name" can be a key, and each recipients first names will be a value for the "first name" key.}. Therefore, application must offer an option to get \ac{KVP}s from user. At the end, each contact's record will have enough information saved in \ac{KVP} to describe all findings that we know about them.
	\item Application must allow user to use those extracted \ac{KVP}s as dynamic variables in the email content. This will allow us to personalize the email with the information specific to each recipients.
	\item User can reuse a sent email as a template to reply respondents or initiate a conversation for group of people. Therefore, application must offer a view to pick the templates from a list.
	\item Application must show the whole state of the conversation. Therefore, the template list can be showed in a directory tree structure as in figure~\ref{fig:ConvStatView}. Each node must represent the templates that user created, and have a given template name by the user.
	\item Application must offer the template selection and conversation state representation under one view. Therefore, user should be able to pick the templates to reuse by looking at nodes in the tree to figure out the state of the conversation .
\end{compactitem}

Next, the prototype implemented to satisfy initial idea of a personalized mass email communication system, and the aforementioned requirements.

\subsection{System}
\label{subsec:4.2.2:ProtSyst}

Initial system was built on the top of an existing project named as EmailValet\footnote{https://www.gmailvalet.com/} also known as GmailValet in \ac{HCI} group\footnote{https://hci.stanford.edu/} at Stanford University. EmailValet is a \ac{SaaS} email client that combines task management together. Remote assistants from an expert crowdsourcing marketplace extract tasks from incoming emails, and annotate them in a task list separated from the inbox \citep{Kokkalis2013}.
\vspace{1cm}

Having a ready-to-use email client to implement the first version of the personalized mass email communication system helped us to save time and effort, and make us focus on the initial requirements as discussed in section~\ref{subsec:4.2.1:ProtReqiAnal}. From the technology point of view, we were also limited with the existing EmailValet's architecture, which was developed in a Web framework \ac{RoR}\footnote{http://rubyonrails.org/}, and JavaScript framework jQuery\footnote{http://jquery.com/}.
\vspace{1cm}

Figure \ref{fig:GmailValetInbox} show EmailValet's inbox view with the modifications of \ac{KVP} a

\begin{figure}[htbp]
	\centering
	\includegraphics[width=1.00\textwidth]{imgs/GmailValetInbox.png}
	\caption[EmailValet Inbox View and Message Reading Pane]{EmailValet Inbox View and Message Reading Pane}
	\label{fig:GmailValetInbox}
\end{figure}


\begin{figure}[htbp]
	\centering
	\includegraphics[scale=0.70]{imgs/ComposePaneWithTemplates.png}
	\caption[Email Template Selection to Reuse Earlier Replies]{Email Template Selection to Reuse Earlier Replies}
	\label{fig:ComposePaneWithTemplates}
\end{figure}

\begin{figure}[htbp]
	\centering
	\includegraphics[scale=0.80]{imgs/EMailKVPs.png}
	\caption[Extracted Key-Value Pairs and Input New Ones]{Extracted Key-Value Pairs and Input New Ones}
	\label{fig:EMailKVPs}
\end{figure}




\section{Evaluation of the Prototype}
\label{sec:4.3:EvalProt}

--> Write drawback in here

\begin{comment}

--> bu prototype aklimiza gelen ilk ozelligi de anlatiyor de
--> bi section da sorunlar neydi diye yaz bunla ilgili
--> Google Formla nasil kolay data aliniyor diye bahset
--> KVP ler sadece son kampnyayala ilgili, hepsi olsa daha iyi olurdu: drawbacks of prototype'a yaz bunu

difficulty to pick a proper one , --> also no need to see old templates aga in since conversation got advanced


--> kimse boyle bir view sunmuyodu yaz, zendesk de var ama sadece bir kisi icin. Diger ozellikleri de saglayan app yok piyasa da diye ekleme yap

--> don't write a generic email, but personalized, effort var

--> there are many cases for maybe case
--> burada visulization koy ver graph i yapistir. listing olsun dashlerler tree yap
--> yukardakileri paragrah title'i kullnarka yaz

only supports hi part, not all

--> Improvements on the content


--> simdi neler olsa kolaytiririza basla

--> write something about this as well: http://blog.mailchimp.com/how-gmails-new-inbox-is-affecting-open-rates/
-->Merge tags allow you to dynamically add content to your email. 

--> Constant Contact'a limitation lari ekle \cite{ConstantContactInc.2011}, same for \cite{TheRocketScienceGroupLLC2013e}

Exploration
Have they taken any online courses before?

--> - DonÕt forget MichaelÕs graph about golden standard
--> flow chart like in slides
--> - Asking follow-up questions are limited in other methods (see the book page 22: Beyond The Usability Lab - Conducting Large Scale Online User Experience Studies(2010))

%\begin{figure}
%\input{imgs/EmailDiagram}%\caption{A simple block diagram\label{diagram}}%\end{figure}

\end{comment}
